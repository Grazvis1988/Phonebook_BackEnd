(this.webpackJsonpphonebook_frontend=this.webpackJsonpphonebook_frontend||[]).push([[0],{19:function(e,t,n){},39:function(e,t,n){"use strict";n.r(t);var c=n(2),o=n.n(c),r=n(14),a=n.n(r),u=(n(19),n(3)),i=n(0),l=function(e){var t=e.value,n=e.onChange;return Object(i.jsxs)("div",{children:["Filter shown with: ",Object(i.jsx)("input",{value:t,onChange:n})]})},s=function(e){var t=e.handleSubmit,n=e.name,c=e.handleName,o=e.number,r=e.handleNumber;return Object(i.jsxs)("form",{onSubmit:t,children:[Object(i.jsxs)("div",{children:["name: ",Object(i.jsx)("input",{value:n,onChange:c})]}),Object(i.jsxs)("div",{children:["number: ",Object(i.jsx)("input",{value:o,onChange:r})]}),Object(i.jsx)("div",{children:Object(i.jsx)("button",{type:"submit",children:"add"})})]})},d=function(e){var t=e.array,n=e.filter,c=e.removePerson;return Object(i.jsx)("div",{children:t.map((function(e){if(new RegExp(n,"i").test(e.name))return Object(i.jsxs)("div",{children:[e.name,": ",e.number,Object(i.jsx)("button",{onClick:function(){return c(e.id)},children:"Remove"})]},e.name)}))})},b=n(4),f=n.n(b),j="/api/persons",h=function(){return f.a.get(j).then((function(e){return e.data}))},m=function(e){return f.a.delete("".concat(j,"/").concat(e),{data:{id:e}}).then((function(e){return e.data}))},x=function(e){return f.a.post(j,e).then((function(e){return e.data}))},O=function(e,t){return f.a.put("".concat(j,"/").concat(e),t).then((function(e){return e.data}))},v=function(e){var t=e.message;return null===t.text?null:Object(i.jsx)("div",{className:"error",style:{color:"".concat(t.color)},children:t.text})},p=function(){var e=Object(c.useState)([]),t=Object(u.a)(e,2),n=t[0],o=t[1],r=Object(c.useState)(""),a=Object(u.a)(r,2),b=a[0],f=a[1],j=Object(c.useState)(""),p=Object(u.a)(j,2),g=p[0],w=p[1],k=Object(c.useState)(""),y=Object(u.a)(k,2),S=y[0],N=y[1],C=Object(c.useState)({text:null,color:"blank"}),T=Object(u.a)(C,2),P=T[0],E=T[1];Object(c.useEffect)((function(){h().then((function(e){o(e)}))}),[]);return Object(i.jsxs)("div",{children:[Object(i.jsx)("h2",{children:"Phonebook"}),Object(i.jsx)(v,{message:P}),Object(i.jsx)(l,{value:S,onChange:function(e){N(e.target.value)}}),Object(i.jsx)("h2",{children:"Add new"}),Object(i.jsx)(s,{handleSubmit:function(e){e.preventDefault();var t={name:b,number:g};if(n.map((function(e){return e.name})).includes(b)&&window.confirm("".concat(b," is already added to phonebook, replace old number with new one?"))){var c=n.find((function(e){return e.name===b})).id;O(c,t).then((function(e){return o(n.map((function(t){return t.id===e.id?e:t})))})).catch((function(e){E({text:"Sorry, contact ".concat(b," was already deleted from the server"),color:"red"}),setTimeout((function(){E({text:null,color:"blank"})}),5e3),o(n.filter((function(e){return e.name!==b})))})),E({text:"Number of ".concat(b," was changed to ").concat(g),color:"green"}),setTimeout((function(){E({text:null,color:"blank"})}),5e3)}else x(t).then((function(e){o(n.concat(e)),E({text:"Added ".concat(t.name),color:"green"}),setTimeout((function(){E({text:null,color:"blank"})}),5e3)})).catch((function(e){console.log(e.response.data),E({text:e.message,color:"red"}),setTimeout((function(){E({text:null,color:"blank"})}),5e3)}));f(""),w(""),N("")},name:b,handleName:function(e){f(e.target.value)},number:g,handleNumber:function(e){w(e.target.value)}}),Object(i.jsx)("h2",{children:"Numbers"}),Object(i.jsx)(d,{array:n,filter:S,removePerson:function(e){window.confirm("Do you really want to delete this contact")&&(m(e).then((function(e){return console.log("Phone contact was removed from server")})).catch((function(e){E({text:"Sorry, contact was already removed from the server",color:"red"}),setTimeout((function(){E({text:null,color:"blank"})}),5e3)})),o(n.filter((function(t){return t.id!==e}))))}})]})};a.a.render(Object(i.jsx)(o.a.StrictMode,{children:Object(i.jsx)(p,{})}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.fc95c4df.chunk.js.map