(this.webpackJsonpphonebook_frontend=this.webpackJsonpphonebook_frontend||[]).push([[0],{19:function(e,n,t){},39:function(e,n,t){"use strict";t.r(n);var c=t(2),r=t.n(c),o=t(14),a=t.n(o),u=(t(19),t(3)),i=t(0),l=function(e){var n=e.value,t=e.onChange;return Object(i.jsxs)("div",{children:["Filter shown with: ",Object(i.jsx)("input",{value:n,onChange:t})]})},s=function(e){var n=e.handleSubmit,t=e.name,c=e.handleName,r=e.number,o=e.handleNumber;return Object(i.jsxs)("form",{onSubmit:n,children:[Object(i.jsxs)("div",{children:["name: ",Object(i.jsx)("input",{value:t,onChange:c})]}),Object(i.jsxs)("div",{children:["number: ",Object(i.jsx)("input",{value:r,onChange:o})]}),Object(i.jsx)("div",{children:Object(i.jsx)("button",{type:"submit",children:"add"})})]})},d=function(e){var n=e.array,t=e.filter,c=e.removePerson;return Object(i.jsx)("div",{children:n.map((function(e){if(new RegExp(t,"i").test(e.name))return Object(i.jsxs)("div",{children:[e.name,": ",e.number,Object(i.jsx)("button",{onClick:function(){return c(e.id)},children:"Remove"})]},e.name)}))})},b=t(4),f=t.n(b),j="/api/persons",h=function(){return f.a.get(j).then((function(e){return e.data}))},m=function(e){return f.a.delete("".concat(j,"/").concat(e),{data:{id:e}}).then((function(e){return e.data}))},x=function(e){return f.a.post(j,e).then((function(e){return e.data}))},O=function(e,n){return f.a.put("".concat(j,"/").concat(e),n).then((function(e){return e.data}))},v=function(e){var n=e.message;return null===n.text?null:Object(i.jsx)("div",{className:"error",style:{color:"".concat(n.color)},children:n.text})},p=function(){var e=Object(c.useState)([]),n=Object(u.a)(e,2),t=n[0],r=n[1],o=Object(c.useState)(""),a=Object(u.a)(o,2),b=a[0],f=a[1],j=Object(c.useState)(""),p=Object(u.a)(j,2),g=p[0],w=p[1],k=Object(c.useState)(""),y=Object(u.a)(k,2),S=y[0],N=y[1],C=Object(c.useState)({text:null,color:"blank"}),P=Object(u.a)(C,2),T=P[0],E=P[1];Object(c.useEffect)((function(){h().then((function(e){r(e)}))}),[]);return Object(i.jsxs)("div",{children:[Object(i.jsx)("h2",{children:"Phonebook"}),Object(i.jsx)(v,{message:T}),Object(i.jsx)(l,{value:S,onChange:function(e){N(e.target.value)}}),Object(i.jsx)("h2",{children:"Add new"}),Object(i.jsx)(s,{handleSubmit:function(e){e.preventDefault();var n={name:b,number:g};if(t.map((function(e){return e.name})).includes(b)&&window.confirm("".concat(b," is already added to phonebook, replace old number with new one?"))){var c=t.find((function(e){return e.name===b})).id;console.log(c),O(c,n).then((function(e){return r(t.map((function(n){return n.id===e.id?e:n})))})).catch((function(e){E({text:"Sorry, contact ".concat(b," was already deleted from the server"),color:"red"}),setTimeout((function(){E({text:null,color:"blank"})}),5e3),r(t.filter((function(e){return e.name!==b})))})),E({text:"Number of ".concat(b," was changed to ").concat(g),color:"green"}),setTimeout((function(){E({text:null,color:"blank"})}),5e3)}else x(n).then((function(e){return r(t.concat(e))})),E({text:"Added ".concat(n.name),color:"green"}),setTimeout((function(){E({text:null,color:"blank"})}),5e3);f(""),w(""),N("")},name:b,handleName:function(e){f(e.target.value)},number:g,handleNumber:function(e){w(e.target.value)}}),Object(i.jsx)("h2",{children:"Numbers"}),Object(i.jsx)(d,{array:t,filter:S,removePerson:function(e){window.confirm("Do you really want to delete this contact")&&(m(e).then((function(e){return console.log("Phone contact was removed from server")})).catch((function(e){E({text:"Sorry, contact was already removed from the server",color:"red"}),setTimeout((function(){E({text:null,color:"blank"})}),5e3)})),r(t.filter((function(n){return n.id!==e}))))}})]})};a.a.render(Object(i.jsx)(r.a.StrictMode,{children:Object(i.jsx)(p,{})}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.8dd931e1.chunk.js.map